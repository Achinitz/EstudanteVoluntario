<div class="content">
  <div class="topo">
    <h1>Meu Perfil</h1>
  </div>
  <ngb-alert #alert type="warning">
    Verifique os seus dados e modifique-os se necessário!
  </ngb-alert>

  <section class="contentDetails col-xl-10">
    <form [formGroup]="formCadastro" #formDir="ngForm" class="formCadastro" (ngSubmit)="editarEstudante()">

      <div class="row userImg">
        <img id="imgUser" [src]="imagem" onError="this.src = 'assets/imagens/cadastroImagem.jpg'" class="float-center"
          alt="..." />
      </div>
      <div class="form-group inputFile">
        <label for="imgPerfil">Imagem de Perfil </label>
        <input type="file" class="form-control-file" id="inputFile" accept="image/png, image/jpeg"
          (change)="inputFileChange($event)" />
      </div>

      <div class="form-group">
        <label for="areasInteresse">Áreas de Interesse </label>
        <textarea class="form-control" id="areasInteresse" rows="3" formControlName="areasInteresse"></textarea>
      </div>

      <div class="form-group">
        <label for="experiencias">Experiências Anteriores </label>
        <textarea class="form-control" id="experiencias" rows="3" formControlName="experiencias"></textarea>
      </div>

      <div class="form-group">
        <label for="nome">Nome Completo <em>*</em> </label>
        <input type="text" class="form-control" id="nomeCompleto" placeholder="Nome Completo"
          formControlName="nomeCompleto" />
      </div>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" id="confirmaNomeSocial" formControlName="confirmaNomeSocial"
          (change)="setNomeSocial()" />
        <label class="form-check-label" for="confirmaNomeSocial">Desejo usar meu nome social</label>
      </div>
      <div *ngIf="confirmaNomeSocial" class="form-group">
        <label for="nomeSocial">Nome Social</label>
        <input type="text" class="form-control" id="nomeSocial" placeholder="Nome Social"
          formControlName="nomeSocial" />
      </div>
      <div class="form-group">
        <label for="login">CPF <em>*</em> </label>
        <input type="text" class="form-control" id="login" placeholder="XXX.XXX.XXX-XX" mask="000.000.000-00"
          formControlName="login" />
      </div>
      <div class="row duplo">
        <div class="col">
          <label for="rg">RG </label>
          <input type="text" class="form-control" placeholder="Número do RG" formControlName="rg" />
        </div>
        <div class="col">
          <label for="rgEmissor">Órgão emissor <em>*</em> </label>
          <input class="form-control" type="text" placeholder="Órgão emissor" formControlName="rgEmissor" />
        </div>
      </div>
      <div class="form-group">
        <label for="estadoCivil">Estado Civil <em>*</em> </label>
        <input class="form-control" type="text" formControlName="estadoCivil" />
      </div>
      <div class="form-group">
        <label for="email">Email <em>*</em> </label>
        <input type="email" class="form-control" id="email" placeholder="name@email.com" formControlName="email" />
        <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="
          formCadastro.controls.email.touched &&
          formCadastro.controls.email.invalid
        " [@fadeInOut]>
          O campo E-mail é obrigatório!
        </small>
      </div>
      <div class="row duplo">
        <div class="col">
          <label for="identificacaoGenero">Identificação de Gênero </label>
          <input type="text" class="form-control" formControlName="identificacaoGenero" id="identificacaoGenero"
            placeholder="Ex: Masculino" />
          <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="
          formCadastro.controls.identificacaoGenero.touched &&
          formCadastro.controls.identificacaoGenero.invalid
        " [@fadeInOut]>
            O campo Identificação de gênero é obrigatório!
          </small>
        </div>
        <div class="col">
          <label for="dataNascimento">Data de Nascimento <em>*</em> </label>
          <input type="text" class="form-control" id="dataNascimento"
            [value]="formCadastro.get('dataNascimento').value | localDate" formControlName="dataNascimento" />
        </div>
      </div>

      <div class="form-group">
        <label for="telefone">Telefone <em>*</em> </label>
        <input type="text" class="form-control" id="telefone" placeholder="(XX) 9XXXX-XXXX" formControlName="telefone"
          mask="(00) 00000-0000 || (00) 0000-0000" />
        <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="formCadastro.controls.telefone.touched &&
        formCadastro.controls.telefone.invalid" [@fadeInOut]>
          O campo Telefone é obrigatório!
        </small>
      </div>

      <div formGroupName="endereco">

        <div class="form-group">
          <label for="cep">CEP <em>*</em> </label>
          <input type="text" class="form-control" id="cep" placeholder="XXXXX-XXX" formControlName="cep"
            mask="00000-000" />
          <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="
              formCadastro.get('endereco.cep').touched && formCadastro.get('endereco.cep').invalid
            " [@fadeInOut]>
            <br />
            O campo CEP é obrigatório!
          </small>
        </div>
        <div class="row duplo">
          <div class="col">
            <label for="estado">Estado/UF <em>*</em> </label>
            <input type="text" class="form-control" formControlName="estado" />
            <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="
            formCadastro.get('endereco.estado').touched && formCadastro.get('endereco.estado').invalid" [@fadeInOut]>
              O campo Estado é obrigatório!
            </small>
          </div>
          <div class="col">
            <label for="cidade">Cidade <em>*</em> </label>
            <input type="text" class="form-control" formControlName="cidade" />
            <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="
            formCadastro.get('endereco.cidade').touched && formCadastro.get('endereco.cidade').invalid" [@fadeInOut]>
              O campo Cidade é obrigatório!
            </small>
          </div>
        </div>

        <div class="form-group">
          <label for="logradouro">Logradouro <em>*</em> </label>
          <input type="text" class="form-control" id="logradouro" placeholder="Rua, Avenida, Travessa, etc."
            formControlName="logradouro" />
          <small id="emailHelp" class="form-text text-danger ng-star-inserted"
            *ngIf="formCadastro.get('endereco.logradouro').touched  && formCadastro.get('endereco.logradouro').invalid"
            [@fadeInOut]>
            O campo Logradouro é obrigatório!
          </small>
        </div>

        <div class="row duplo">
          <div class="col">
            <label for="exampleFormControlInput1">Número <em>*</em> </label>
            <input type="text" class="form-control" placeholder="Número" formControlName="numero" />
            <small id="emailHelp" class="form-text text-danger ng-star-inserted"
              *ngIf="formCadastro.get('endereco.numero').touched && formCadastro.get('endereco.numero').invalid"
              [@fadeInOut]>
              O campo Número é obrigatório!
            </small>
          </div>
          <div class="col">
            <label for="exampleFormControlInput1">Bairro <em>*</em> </label>
            <input type="text" class="form-control" placeholder="Bairro" formControlName="bairro" />
            <small id="emailHelp" class="form-text text-danger ng-star-inserted"
              *ngIf="formCadastro.get('endereco.bairro').touched && formCadastro.get('endereco.bairro').invalid"
              [@fadeInOut]>
              O campo Bairro é obrigatório!
            </small>
          </div>
        </div>
        <div class="form-group">
          <label for="complemento">Complemento</label>
          <input type="text" class="form-control" id="complemento" placeholder="Complemento ou Ponto de Referência."
            formControlName="complemento" />
        </div>
      </div>

      <div formGroupName="curso">
        <div class="form-group">
          <label for="ies">Instituição de Ensino <em>*</em> </label>
          <input type="text" class="form-control" id="instituicao" formControlName="instituicao" />
        </div>
        <div class="form-group">
          <label for="nomeCurso">Curso <em>*</em> </label>
          <input type="text" class="form-control" id="curso" formControlName="nomeCurso" />
        </div>
        <div class="form-group">
          <label for="campus">Campus</label>
          <input type="text" class="form-control" id="campus" placeholder="Informe o nome do Campus"
            formControlName="campus" />
        </div>
        <div class="row duplo">
          <div class="col">
            <label for="anoInicio">Ano de Início <em>*</em> </label>
            <input type="text" class="form-control" id="anoInicio"
              [value]="formCadastro.get('curso.anoInicio').value | localYear" formControlName="anoInicio" />
          </div>
          <div class="col">
            <label for="anoConclusao">Previsão de conclusão <em>*</em> </label>
            <input type="text" class="form-control" id="anoConclusao"
              [value]="formCadastro.get('curso.anoConclusao').value | localYear" formControlName="anoConclusao" />
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="novaSenha">Nova senha </label>
        <input type="password" id="novaSenha" class="form-control" placeholder="Digite a sua nova senha" #novaSenha />
      </div>
      <div class="form-group">
        <label for="inputPassword5">Confirmar Senha </label>
        <input type="password" id="confirmarSenha" class="form-control" placeholder="Confirme a sua nova senha"
          #confirmarSenha />
        <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="
          formCadastro.controls.confirmarSenha.touched && 
          formCadastro.controls.novaSenha.value.length > 0 && 
          formCadastro.controls.confirmarSenha.value.length == 0
        " [@fadeInOut]>
          O campo Confirmar Senha é obrigatório!
        </small>
        <small id="emailHelp" class="form-text text-danger ng-star-inserted" *ngIf="
          formCadastro.controls.novaSenha.value?.length > 0 &&
          formCadastro.controls.confirmarSenha.value?.length > 0 &&
          formCadastro.controls.novaSenha.value != formCadastro.controls.confirmarSenha.value
        " [@fadeInOut]>
          As senhas informadas não são iguais!
        </small>
      </div>

      <div class="buttonForm">
        <button type="submit" class="btn btn-success">
          Atualizar
        </button>
        <button type="reset" class="btn btn-warning">
          Desfazer alterações
        </button>
        <button class="btn btn-danger" (click)="desativarConta()">
          Desativar Conta
        </button>
      </div>
    </form>
  </section>